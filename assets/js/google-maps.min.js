function initialize(){{var e={center:new google.maps.LatLng(60.586967,15.637665),zoom:4,scrollwheel:!1,noClear:!1};new google.maps.LatLng(60.586967,15.637665)}geocoder=new google.maps.Geocoder,map=new google.maps.Map(document.getElementById("map-canvas"),e)}function codeAddress(e,t){var o=e,a=t;geocoder.geocode({address:o},function(e,t){t==google.maps.GeocoderStatus.OK&&(map.setCenter(e[0].geometry.location),map.setZoom(a))})}jQuery(document).ready(function(e){e("#stores-show-list").click(function(){e(".filter-result").show(),e(this).addClass("selected"),e("#stores-show-map").removeClass("selected"),google.maps.event.trigger(map,"resize")}),e("#stores-show-map").click(function(){e(".filter-result").hide(),e(this).addClass("selected"),e("#stores-show-list").removeClass("selected")}),$select_county=e("#select-county").selectize();var t=$select_county[0].selectize;$select_city=e("#select-city").selectize();var o=$select_city[0].selectize;$select_store=e("#select-store").selectize();var a=$select_store[0].selectize,n=function(){var n=t.getValue();codeAddress(n,8),o.clearOptions(),a.clearOptions(),e.post(mbAjax.ajaxurl,{action:"ajax_get_all_cities_by_county",county:n},function(t){e.each(t,function(e,t){o.addOption({value:t,text:t}),o.addItem(t)}),o.refreshItems(),o.clear()}),e("#map-filter-result").empty(),e.post(mbAjax.ajaxurl,{action:"ajax_get_all_stores_by_county",county:n},function(t){for(p in t){var o=(t[p].store_id,t[p].post_title),a=t[p].permalink,n=t[p].city;e("#map-filter-result").append('<li><div class="result-title"><a href="'+a+'">'+o+'</a></div><span class="badge">'+n+"</span></li>")}google.maps.event.trigger(map,"resize")})};t.on("dropdown_close",n);var s=function(){var t=o.getValue();codeAddress(t,12),a.clearOptions(),e("#map-filter-result").empty(),e.post(mbAjax.ajaxurl,{action:"ajax_get_all_stores_by_city",city:t},function(t){for(p in t){var o=t[p].lat,n=t[p].long,s=t[p].store_id,i=t[p].post_title,l=t[p].city,r=t[p].permalink;void 0===o||null===o||void 0===n||null===n||(tmpLatLng=new google.maps.LatLng(o,n),a.addOption({value:s,text:i}),a.addItem(s)),e("#map-filter-result").append('<li><div class="result-title"><a href="'+r+'">'+i+'</a></div><span class="badge">'+l+"</span></li>")}a.refreshItems(),a.clear(),google.maps.event.trigger(map,"resize")})};o.on("dropdown_close",s);var i=function(){var t=a.getValue();e.post(mbAjax.ajaxurl,{action:"ajax_get_store_by_id",id:t},function(e){for(p in e){{var t=e[p].lat,o=e[p].long;e[p].store_id,e[p].post_title}void 0===t||null===t||void 0===o||null===o||(tmpLatLng=new google.maps.LatLng(t,o),map.setCenter(tmpLatLng),map.setZoom(16))}})};a.on("dropdown_close",i),e.post(mbAjax.ajaxurl,{action:"ajax_get_all_countys"},function(o){e.each(o,function(e,o){t.addOption({value:o,text:o}),t.addItem(o)}),t.refreshItems(),t.clear()}),jQuery.post(mbAjax.ajaxurl,{action:"ajax_get_map_markers"},function(e){initialize();for(p in e){var t=e[p].lat,o=e[p].long,a=e[p].post_title,n=(e[p].post_content,e[p].phonenumber),s=(e[p].streetname,e[p].zipcode,e[p].city,e[p].permalink);if(void 0===t||null===t||void 0===o||null===o);else{tmpLatLng=new google.maps.LatLng(t,o);var i=new google.maps.Marker({map:map,position:tmpLatLng,title:a}),l='<div id="content"><div id="siteNotice"></div><h2>'+a+'</h2><div id="bodyContent"><p><b>Telefonnummer: </b>'+n+'</p><p><a href="'+s+'"> Visa butikssida </a></p></div></div>';bindInfoWindow(i,map,infowindow,l),markers.push(i)}}})});var geocoder,map,places,markers=[],geocoder,markersarray,infowindow=new google.maps.InfoWindow({content:""}),bindInfoWindow=function(e,t,o,a){google.maps.event.addListener(e,"click",function(){o.setContent(a),o.open(t,e)})};